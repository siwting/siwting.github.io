## 设计规范
### url命名规范

- 命名："模块名/二级模块（若有）/功能名称?过滤信息"
- 命名要求：
    - 全部小写，都是名词
    - 每个名称在10个字母以内
    - 功能名称不要出现模块名称
- 最好是使用RESTful的url命名规范

```java
// 卫小宝手表的获取闹钟列表的功能
url = "/wxb/alarm/all"
// 卫小宝手表的获取闹钟详情的功能
url = "/wxb/alarm/detail"
// 卫小宝手表的添加闹钟的功能
url = "/wxb/alarm/create"
// 卫小宝手表的更新闹钟的功能
url = "/wxb/alarm/update"
// 卫小宝手表的删除闹钟的功能
url = "/wxb/alarm/delete"
```

### 实体及dao设计

- entity包存放与表结构基本一一对应的POJO类
- 表的一对多关系，在一的一方使用List列表表示关系
- 如果需要与表结构不符合的领域模型，可以在vo包中定义模型类，类名以Vo结尾
- mapper包存放对应的dao方法，原则上跟对应的表相关
- dao的增删改查方法，分别以insert、delete、update和select开头

```java
// 春雨问诊
class Question {
  private List<QuestionDetail> details;
}
class QuestionDetail {

}
```

## 编程规范

编码过程中的规范要求如下：

### 日志要求  
记录关键业务方法的输入、输出和出错信息，复杂业务逻辑的方法可以加多条日志，严禁无数据信息的日志输出。

1. action:

    - 请求参数：用info打印参数值，对于list参数，不必打印所有的参数值，可以打印list的大小和第一个元素的信息
    - 业务处理结果：用info打印结果的主要信息
    - 异常：用error打印主要参数的值和异常信息

```java
public WxbWatch bind(@RequestBody WxbWatch wxbWatch) {
    LOGGER.info("Wxb绑定设备：【{}】", wxbWatch);
    if (wxbWatch == null || StringUtils.isEmpty(wxbWatch.getDevCode()) ||
            StringUtils.isEmpty(wxbWatch.getBindCode())) {
        LOGGER.error("Wxb绑定设备：【必填参数为空】");
        return null;
    }

    try {
        if (PropertiesUtil.containIllegalStr(wxbWatch, Constants.WXB_ILLEGAL_STR)) {
            LOGGER.error("Wxb绑定设备：【包含非法字符】");
            return null;
        }
        return wxbWatchService.bind(wxbWatch);
    } catch (Exception e) {
        LOGGER.error("Wxb绑定设备异常：【{}，{}】", wxbWatch.getDevCode(), e.getMessage());
    }
    return null;
}
```

2. service

    - 数据库访问返回：用info打印主要、关键信息
    - http请求：用info打印请求的响应字符串
    - 异常：用error打印主要参数的值和异常信息

```java
public WxbWatch bind(WxbWatch wxbWatch) throws Exception {
  // 省略
  LOGGER.info("Wxb绑定设备上传的数据：【{}】", wxbWatch);
  String json = HttpInvoker2.httpPost(url, null, JSONHelper.beanToJson(wxbWatch));
  LOGGER.info("Wxb绑定设备的请求返回：【{}】", json);
  // 省略
}
```

3. 定时任务

    - 参数：用info打印参数值
    - 业务处理结果：用info打印结果的主要信息
    - 异常：用error打印主要参数的值和异常信息

4. 实体

    - 每个实体都需重写toString()，方法内部返回该实体的主要信息

### 非空判断  

- 输入参数：若为对象，在使用对象的属性和方法之前，务必进行非空判断
- 数据库访问返回：返回的结果在使用时，务必先进行非空判断
- 对于结果为null的对象，无需创建一个空对象返回，容易造成读取到null属性值

### 异常处理  

- 在iguard项目中，当参数为null或必填参数为空，抛异常
- finally中只处理资源的关闭，禁止写业务逻辑
