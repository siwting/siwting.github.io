### 1. 单元测试的目的

- 测试可能出错的地方或边界情况
- 尽早在尽量小的范围内暴露错误

### 2. 单元测试的粒度

**选择测试粒度的原则**
- 被测试类中所有的public、protected的方法都要测
- 简单的setter/getter方法无需测试
- 代码行数在10行以内的、且逻辑简单的方法无需测试

**单元测试的粒度分5个级别**

-- 引自[iHowandWhy.com的博客：单元测试](http://www.ihowandwhy.com/z/%E8%AF%B7%E9%97%AE%E9%AB%98%E6%89%8B%E5%A4%A7%E7%89%9B%E4%BB%AC%E9%83%BD%E6%98%AF%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8CUnitTest%E7%9A%84%EF%BC%9F)
- level1：正常流程可用，即方法输入正确的参数，会有正确的输出
- level2：异常流程可抛出逻辑异常，即输入参数有误时，不能抛出系统异常，而是用自己定义的逻辑异常通知上层调用代码其错误之处
- level3：极端情况和边界数据可用，对输入参数的边界情况也要单独测试，确保输出是正确有效的
- level4：所有分支、循环的逻辑走通，不能有任何流程是测试不到的
- level5：输出数据的所有字段验证，对有复杂数据结构的输出，确保每个字段都是正确的

测试用例的设计需满足：
- 代码覆盖率：语句覆盖100%、分支覆盖50%以上
- 需完成controller、service层的level1和lsevel2级别的单元测试的编写，重要的底层服务，要做到level3或level4。

### 3. 单元测试相关工具

- xUnit：大名鼎鼎的单元测试框架，其中：针对Java的是JUnit
- Spring Test：Spring的单元测试框架，提供了对服务端和客户端的测试支持
- Mockito：模拟测试框架，通过创建和配置Mock对象模拟外部依赖
- jsonpath：针对返回json类型的webservice api，从json中提取数据
- 代码覆盖度工具：Intellij自带的Coverage、JaCoCo，高的代码覆盖率不能保证测试完全！
